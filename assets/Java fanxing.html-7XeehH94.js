import{_ as s,o as a,c as t,a as p,b as n,f as e}from"./app-GYMnAgnr.js";const c="/viteblog/assets/453-CEA2YegT.png",o="data:image/png;base64,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",l="/viteblog/assets/455--8rm4QXN.png",i="/viteblog/assets/459-36Byp3z3.png",u="/viteblog/assets/460-SF2AXzgh.png",k="/viteblog/assets/461-s4Z4cKqP.png",r="/viteblog/assets/456-LXPrZ9pf.png",d="/viteblog/assets/457-KsKMJWwt.png",v="/viteblog/assets/458-cMSHaHI6.png",m={},b=n("div",{class:"custom-container tip"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"TIP"),n("p",null,"JDK 在 1.5 之后，引入了泛型概念，泛型的推出，是为了使用者能够写出通用性更强的代码。在编写代码时，对应的数据类型还不能确定，在被使用时才指定类型。")],-1),g=e(`<h2 id="什么是泛型" tabindex="-1"><a class="header-anchor" href="#什么是泛型" aria-hidden="true">#</a> 什么是泛型</h2><p>提到泛型，相信接触过Java的同学都应该比较了解泛型的概念，那么为什么要有泛型这个概念呢？泛型的作用是什么呢？</p><p>就拿 ArrayList 来说，如果没泛型的存在，想保存数据在List中，就要定义不同的类，用来支持不同类型， 如 IntegerList、FloatList、DoubleList等。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">8683452581122892189L</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_CAPACITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span> <span class="token comment">// non-private to simplify nested class access</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
        elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可能也有人会说，为什么不能全部都用Object来接受，就不用编写那么多实现类， 也不用泛型了，确实是可以的，在泛型推出之前，确实一直是这样的。</p><p>但这样做会产生一些问题，因为 Object 是所有类的父类，可以接受所有类型的对象，当 List 中插入不同类型的元素时，编译时不会报错，在对类型处理时，就会出现类型转换错误。</p><p>其次就是，我们也只能通过变量命名来得知，这个 List 是用来保存什么类型的元素的，而不像使用泛型标识符可以清晰地指定集合中元素的类型。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span> intList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

intList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;我爱你中国&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> item <span class="token operator">:</span> intList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果：</p><p><img src="`+c+'" alt="图片"></p><p>综上所述，泛型有以下两点作用：</p><p>1、写出更加通用的代码，而无需编写过多的实现类。</p><p>2、在编译期提供类型检查功能，如类型不一致，编译器会报出编译错误，其次，可以清晰了解类/方法所使用的具体数据类型。</p><h2 id="泛型的分类" tabindex="-1"><a class="header-anchor" href="#泛型的分类" aria-hidden="true">#</a> 泛型的分类</h2><p>泛型的用法主要分为泛型接口、泛型类、泛型方法。</p><p>接下来通过模仿 JDK 提供的 Optional 工具类，来介绍泛型的使用方法，Optional 是 JDK 提供的、更加更优雅的判断空值的工具类，可以简单理解为只能保存一个元素的集合。</p><p><img src="'+o+`" alt="图片"></p><h3 id="泛型接口" tabindex="-1"><a class="header-anchor" href="#泛型接口" aria-hidden="true">#</a> 泛型接口</h3><p>首先，定义一个接口，并使用 &lt;T&gt; 来指定泛型，包含两个方法注释如下，其中 <code>getObj()</code> 方法，返回的是 T 的类型和接口指定的泛型 T 是同一个类型，这里的泛型 T 是可以任意定义的，不过不同字母有不同的含义，后面会介绍。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CustomOptional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 判断是否为空
     * <span class="token keyword">@return</span> 是否为空
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * 获取内部保存的对象
     * <span class="token keyword">@return</span> 内部保存对象
     */</span>
    <span class="token class-name">T</span> <span class="token function">getObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="泛型类" tabindex="-1"><a class="header-anchor" href="#泛型类" aria-hidden="true">#</a> 泛型类</h3><p>泛型类在实现泛型接口时，要带上泛型参数&lt;T&gt;，且要和泛型接口保持一致，否则编译报错，在类的内部可以使用 T 类型，如 obj 成员变量类型和 <code>getObj()</code> 的返回值类型。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomOptionalImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">CustomOptional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">CustomOptionalImpl</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="泛型方法" tabindex="-1"><a class="header-anchor" href="#泛型方法" aria-hidden="true">#</a> 泛型方法</h3><p>现在我们想在 CustomOptionalImpl 中加一个静态的工厂方法，由于当前类指定的泛型只能给成员方法或成员变量使用，此时就可以使用泛型方法。</p><p>这个泛型 K 和之前定义的泛型 T 没有任何关系，泛型 K 只在泛型方法内生效，在入参传入 K 类型来指定泛型，在方法返回值前，定义泛型参数&lt;K&gt;，定义返回值中也包含泛型 K，表示返回的对象中的泛型是 K 类型。</p><p>定义一个泛型方法的语法如下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>方法作用域修饰符 &lt;泛型类型&gt; 返回值类型 方法名（泛型）{

}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">CustomOptionalImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">K</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomOptionalImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>public 与返回值类型中间的 <strong>泛型类型</strong> 非常重要，可以理解为声明此方法为泛型方法。</p></li><li><p>只有声明了泛型类型的方法才是泛型方法，泛型类中的使用了泛型的成员方法并不是泛型方法。</p></li><li><p>表明该方法将使用泛型类型 K，此时才可以在方法中使用泛型类型 K。</p></li><li><p>与泛型类的定义一样，此处 K 可以随便写为任意标识，常见的如 T、E、K、V 等形式的参数常用于表示泛型。</p></li></ul><h3 id="测试泛型案例" tabindex="-1"><a class="header-anchor" href="#测试泛型案例" aria-hidden="true">#</a> 测试泛型案例</h3><p>新建 User 类：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试 main 方法中，首先使用工厂方法 <code>of()</code> 创建一个 CustomOptional 对象，传入的类型就是定义的泛型 K，之后调用 <code>ifPresent()</code> 方法，来进行判空。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">CustomOptional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userCustomOptional <span class="token operator">=</span> <span class="token class-name">CustomOptionalImpl</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userCustomOptional<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行不为空逻辑&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行为空的逻辑&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>main方法执行结果：</p><img src="`+l+`" alt="图片" style="zoom:50%;"><h2 id="泛型的继承" tabindex="-1"><a class="header-anchor" href="#泛型的继承" aria-hidden="true">#</a> 泛型的继承</h2><p>在 Java 中，父类可以接受子类对象，如 Number 类是 Integer 的父类，可以用 Number 类来接受 Integer 类的对象。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Number</span> number <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>但是在泛型中这样做是错误的，会报编译错误提示无法进行类型转换。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> numberList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
numberList <span class="token operator">=</span> integerList<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="泛型的上界通配符" tabindex="-1"><a class="header-anchor" href="#泛型的上界通配符" aria-hidden="true">#</a> 泛型的上界通配符</h3><p>那么在泛型中是否有这种子类和父类的继承关系呢？JDK 提供泛型的上界通配符，<code>&lt;? extends T&gt;</code>，表示可以接受所有继承自 T 的类型，也就是 <strong>规定泛型的上界为 T</strong>。</p><p>如下，定义一个方法 <code>print()</code> 来输出 numberList，该 List 所指定的泛型，<code>&lt;? extends Number&gt;</code> 表示 List 中保存的类型均为 Number 类的子类对象。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> numberList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Number</span> result<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Number</span> number <span class="token operator">:</span> numberList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写 main 方法，传入 integerList：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">print</span><span class="token punctuation">(</span>integerList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>泛型的上界在使用过程中，还要注意一点的，当向 numberList 中添加元素时，会提示编译错误，为什么会出现这种情况？如下，Float确实是 Number 的子类。</p><img src="`+i+'" alt="图片" style="zoom:80%;"><p>打开 ArrayList 源码，来看 List 的 <code>add()</code> 方法，对于 numberList 来说，这里的E相当于也被替换成了 <code>&lt;? extends Number&gt;</code>。</p><img src="'+u+`" alt="图片" style="zoom:80%;"><p>JDK 出于类型安全考虑，当使用 <code>&lt;? extends T&gt;</code> 作为方法入参，就禁止传入 T 类的子类，也包括传入 T 类本身的对象（传入null除外）。</p><p><strong>对于集合来说，使用泛型上界无法进行元素修改、添加</strong>，对于 <code>add()</code> 等入参是 <code>&lt;？extends Number&gt;</code> 的方法来说，这些方法是无法被使用的，因此 numberList 相当于是 <strong>只读</strong> 的。</p><h3 id="泛型的下界通配符" tabindex="-1"><a class="header-anchor" href="#泛型的下界通配符" aria-hidden="true">#</a> 泛型的下界通配符</h3><p>除了前面介绍的上界通配符，JDK 还提供了下界通配符 <code>&lt;? super T&gt;</code> 表示类型必须是 T 的父类。</p><p>首先编写 Person 类和子类 Student 类：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Person{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> stuNo<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getStuNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stuNo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStuNo</span><span class="token punctuation">(</span><span class="token class-name">String</span> stuNo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stuNo <span class="token operator">=</span> stuNo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Student{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, stuNo=&#39;&quot;</span> <span class="token operator">+</span> stuNo <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来，编写 <code>print()</code> 方法，接收参数为 <code>List&lt;? super Student&gt;</code>，表示在调用 <code>print()</code> 方法时，需要传入的 List 的泛型类型为 Student 的父类，并循环输出 studentList 元素。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> studentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Student</span> student<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> studentList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        student <span class="token operator">=</span> studentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建 personList ，调用print方法：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>personList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际上，这段代码根本无法运行，在 <code>print()</code> 方法中，会提示编译错误。</p><p><img src="`+k+`" alt="图片"></p><p>因为 JDK 出于类型安全考虑，方法签名返回值为 <code>&lt;? super T&gt;</code>，就无法使用任何 T 的父类来接收返回值，也包括返回 T 类本身的对象(Object除外)。</p><p><strong>对于集合来说，使用泛型下界，则无法进行元素获取，可以进行元素添加、修改</strong>，对于 <code>get()</code> 等返回值是 <code>&lt;？extends Student&gt;</code> 的方法来说，这些方法是无法被使用的，因此 stutdentList 相当于是 <strong>可写而不可读</strong> 的。</p><h3 id="pecs-原则" tabindex="-1"><a class="header-anchor" href="#pecs-原则" aria-hidden="true">#</a> PECS 原则</h3><p>PECS 原则即 Producer Extends Consumer Super，为了方便记忆上界（? extends T）和下界(? super T)，使用 ? extends T 表示可以读取，即为生产者，使用 ? super T 表示可以写入，即为消费者。</p><p>关于泛型上界、下界最好的例子就是，Collections.copy() 方法，方法有两个参数， dest 表示要复制的目标list，src表示源 list，正如我们前面得出的结论，dest 由于使用的下界，所以在方法内只能进行添加，src 使用上界，所以只能进行读取。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dest<span class="token punctuation">,</span>
                            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> srcSize <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>srcSize <span class="token operator">&gt;</span> dest<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token string">&quot;Source does not fit in dest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>srcSize <span class="token operator">&lt;</span> <span class="token constant">COPY_THRESHOLD</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span>src <span class="token keyword">instanceof</span> <span class="token class-name">RandomAccess</span> <span class="token operator">&amp;&amp;</span> dest <span class="token keyword">instanceof</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>srcSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            dest<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> di<span class="token operator">=</span>dest<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> si<span class="token operator">=</span>src<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>srcSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            di<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            di<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>si<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通配符" tabindex="-1"><a class="header-anchor" href="#通配符" aria-hidden="true">#</a> &lt;?&gt;通配符</h3><p>&lt;?&gt; 无限定通配符没有指定上界和下界，即不支持读取也不支持修改，都会报编译错误，因此只能做一些判空操作，&lt;?&gt;并不常用。</p><img src="`+r+`" alt="图片" style="zoom:80%;"><p>不过&lt;?&gt;是所有&lt;T&gt;类的父类，用法如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> integerList<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="java-泛型的本质-泛型擦除" tabindex="-1"><a class="header-anchor" href="#java-泛型的本质-泛型擦除" aria-hidden="true">#</a> Java 泛型的本质（泛型擦除）</h2><p>Java 泛型的本质是伪泛型，泛型的限制只在编译器生效，编译期编译完带有 Java 泛型的程序后，其生成的 class 文件中与泛型相关的信息会被擦除掉，以此来保证程序运行的效率并不会受影响，也就说泛型类型在 jvm 中和普通类是一样的。</p><p>下面编写一段简单的使用泛型的代码。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericityDemo</span> <span class="token punctuation">{</span>    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
        integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 javac 编译之后，反编译查看 class 文件，发现泛型已经消失了。</p><img src="`+d+`" alt="图片" style="zoom:80%;"><p>再用一个例子来证明 Java 是伪泛型，先定一个 List&lt;Integer&gt; 的list之后，使用反射调用 add 方法添加一个String元素。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>      
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Method</span> addMethod <span class="token operator">=</span> integerList<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    addMethod<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>integerList<span class="token punctuation">,</span> <span class="token string">&quot;我爱你中国&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>integerList<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行 main 方法，发现没有任何错误，字符串被成功添加到List中，证明了 Java 是伪泛型，在编译之后泛型信息就被擦除了。</p><p><img src="`+v+'" alt="图片"></p><h2 id="泛型字符的含义" tabindex="-1"><a class="header-anchor" href="#泛型字符的含义" aria-hidden="true">#</a> 泛型字符的含义</h2><p><strong>E</strong>-Element: 用于在集合中使用，表示集合元素</p><p><strong>T</strong>-Type：表示普通 Java 类</p><p><strong>K</strong>-Key：表示key-value键值对的键</p><p><strong>V</strong>-Value：表示key-value键值对的值</p><p><strong>N</strong>-Number：表示该类型是数值类型</p><p>以上这些字符表示并不是强制要求，而是一些建议的做法。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>本文主要介绍了为什么要使用泛型，主要是为了写出通用性更强的代码，并且能避免类型转换出错。</p><p>接下来介绍了泛型的用法包括：泛型接口、泛型类、泛型方法，介绍了泛型的继承关系：上界、下界、无限定通配符等。</p><p>最后通过两个例子来验证 Java 的泛型是伪泛型，并介绍了常见的泛型字符的含义。</p><p>泛型是一个比较抽象的概念，它使用起来非常灵活，一时间理解不了可以反复思考，编写 Demo 进行验证，并把它应用在实际的场景中，这样才能真正的理解泛型的概念、思想和用法。</p>',97);function w(y,h){return a(),t("div",null,[b,p(" more "),g])}const A=s(m,[["render",w],["__file","Java fanxing.html.vue"]]);export{A as default};
